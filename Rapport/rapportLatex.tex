% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{datetime}
\usepackage{amssymb,amsmath} % For mathematical expressions  (Tillagd av Nai) 
\usepackage{textcomp} % For degree sign (Tillagd av Nai) 

%%% NEW COMMANDS
\renewcommand{\dateseparator}{-}
\newdateformat{mydate}{\THEYEAR \dateseparator0\THEMONTH \dateseparator \THEDAY} 
\renewcommand{\figurename}{Figur}

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%%% END Article customizations






%%% The "real" document content comes below...

\pagenumbering{gobble}
\title{Projektrapport Grupp 3 \\* 
Curling\\*
TNM085 Modelleringsprojekt}
\author{Linnéa Mellblom\\*Linnea Malcherek\\* Julia Nilsson\\*Michael Nilsson\\*Linnéa Nåbo}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 
\mydate


\begin{document}
\maketitle
\pagebreak
\pagenumbering{arabic}  

\section{Introduktion}
Curling jättekul. Beskriva något om att inte så jättevanligt att simulera curling "på riktigt" sätt. Säga att vi fokuserat på vissa saker, kanske ska ligga under nästa stycke istället då? 

\section{Begränsningar och förenklingar} %kanske inte världens bästa rubrik men ändra sen
I alla beräkningar har vi förutsatt att curlingstenarna har samma massa, och därmed förenklat beräkningarna med att förkortta bort massan. 

I detta arbete har vi främst fokuserat på att hantera curlingstenens translation och friktionens påverkan, rotation och även kollision. 

Att visa hur sopning framför curlingstenen har vi ej fokuserat på....

\section{Fysik} % kanske ha en annan rubrik här!

\subsection{Translation}

I beräkningarna av stenens rörelse har hänsyn tagits till tre påverkande friktionskrafter (Figur~\ref{fig:Translation}): Kraft i riktning motsatt stenens rörelseriktning, samt två krafter i ortogonal riktning mot denna \eqref{Ftot}. Dessa två krafter utgörs av friktionskrafterna i främre delen av stenen samt i den bakre delen. Differensen mellan dessa två krafter är vad som påverkar stenens curl (svängning). 

 \begin{align}\label{Ftot}
 \bar{F_t}&=\bar{F_f}+\bar{F_b}+\bar{F}\\
 \bar{F_f}&<\bar{F_b}
 \end{align}


\begin{figure}[ht!]
\centering
\includegraphics[width=80mm]{Translation.png}
\caption{Påverkan av stenens translation}
\label{fig:Translation}
\label{overflow}
\end{figure}

\subsubsection{Friktionens påverkan}
I kontaktytan mellan isen och curlingstenen uppstår friktion. Friktionens påverkan avgörs av stenens kontaktyta samt isens egenskaper. Isen i sin tur påverkas av temperatur och luftfuktighet. Före spel prepareras isen genom såkallad "pebbling" då vattendroppar sprids ut över isen och skapar en mindre glatt struktur. (KANSKE KRÄVS REF?). 
Vid sopning värms isen upp och en tunn vattenhinna skapas framför stenen. Detta gör så att friktionen mellan sten och is minskar och därmed går stenen längre vid sopning.  
\\\\Stenens curl beror på att friktionen i den bakre delen \eqref{Fsida2} av stenen är högre än i den främre \eqref{Fsida1}.  
En curlingsten har en kontaktyta mot isen bestående av ett tunt band (ca 5mm brett REFERENS) som har en något ojämn yta, så kallad "scratchad" yta. Då den främre halvan av stenen rör sig över den pebblade isen orsakas ett spår i isen i stenens rörelseriktning med en liten vinkel i rotationsriktningen. Då den bakre delen av bandet passerar samma yta ska bandets scratchade yta passera dessa spår, vilka då ligger i nästan rätvinklig riktning från bandets färdriktning, (Figur~\ref{fig:Friktion}). Det innebär att den bakre delen av stenen får ett högre motstånd, en högre friktionskraft, än den främre \eqref{biggerthan}. 
REFERENS: http://www.sciencedirect.com/science/article/pii/S0043164813000732

 \begin{align}\label{Fsida1}
 F_1& = ma_1 = \mu_1 mg \Rightarrow a_1 = \mu_1 g \\\label{Fsida2}
 F_2& = ma_2 = \mu_2 mg \Rightarrow a_2 = \mu_2g \\\label{biggerthan}
 \mu_2& > \mu_1
 \end{align}

\begin{figure}[ht!]
\centering
\includegraphics[width=110mm]{Friktion_bakfram.png}
\caption{Friktion i punkt bak respektive fram på stenen. Den bakre delen måste passera de spår framsidan av stenen skapat, vilket leder till högre friktion.}
\label{fig:Friktion}
\label{overflow}
\end{figure}

Den vattenhinna som skapas vid sopning för med sig att de spår som den främre delen av stenen åstadkommer minskar och därmed  även dess effekt på den bakre delen av stenen. Därmed gör sopning att stenen curlar mindre. Friktionen i punkterna längs bandet påverkas av av stenens rörelse framåt \eqref{mu}. HÄR BEHÖVS VERKLIGEN REFERENS!     

\begin{equation}\label{mu} 
\mu = \frac{c}{\sqrt{v}} \Rightarrow a = \frac{cg}{\sqrt{v}} 
\end{equation}

c = konstant, g = gravitation, v = hastigheten

\subsubsection{Resulterande translation}

Translationen av stenen är en resulterande hastighetsvektor v, som består av hastigheten i rörelseriktningen samt av hastigheten i punkterna längs det ringformade band stenen roterar på. I beräkningarna har dessa förenklats till två hastighetsvektorer: en för den främsta punkten (p1)  på stenens band och en för den bakersta (p2),(Figur~\ref{fig:Translation}). 
\\\\Beräkningen av hastigheterna i punkterna p1 och p2 beräknas i två steg. I första steget omvandlas stenens rotationshastighet till translationshastighet i riktningen i punkternas rotationsriktning \eqref{vsida_init}. REFERENS PHYSICS HANDBOOKS 168.
 
\begin{equation}\label{vsida_init}
 v_1 = v_2 = \omega r
 \end{equation}

%OBS HÄR ANVÄNDER VI VÄL INTE V1 OCH V2 UTAN SPEED_SIDE, ALLTSÅ VEKTORSUMMAN!?
I det andra steget beräknas den påverkan som friktionen har på hastigheten i de två punkterna, där friktionen påverkas av hastigheten i stenens färdriktning samt av en konstant c,  \eqref{Fsida1} \eqref{Fsida2} \eqref{mu} . 
REF FRICTIONAL FORCE IN MOTION, PHYSICS HANDBOOK S 158
\\\\Hastigheterna i de två punkterna blir därmed två hastighetsvektorer i motsatta riktningar där den ena är större än den andra och resultanten blir således den riktning åt vilken stenen curlar (Figur~\ref{fig:Translation}). 
\\\\Den resulterande hastigheten består i beräkningarna således av tre komponenter, \eqref{vtot}, där vektorn i riktning framåt uppdateras för varje position. 

 \begin{align}\label{vtot}
 \bar{v_s}& = \bar{v_1}+\bar{v_2}\\
 \bar{v}&=\bar{v_f}+\bar{v_s}
 \end{align}

\subsection{Rotation}


Stenen har även en roterande rörelse med en vinkelhastighet vars ursprungsvärde beräknas utifrån utslagshastigheten av stenen.
Vid utslaget antas att spelaren håller stenen så att handtaget pekar i en riktning 90\textdegree  från riktning framåt antingen med "inhand" eller "outhand" och släpper stenen med handtaget pekande rakt fram vid hoglinjen LITE BILDER PÅ BANAN. Detta innebär att stenen roterar 90\textdegree under den tid det tar för spelaren att ta sig mellan hack och hog, vilket är direkt kopplat till den angivna utslagshastigheten. 

\begin{figure}[ht!]
\centering
\includegraphics[width=110mm]{bana.png}
\caption{Curlingbanan}
\label{fig:bana}
\label{overflow}
\end{figure}


\begin{align}%\label{vtot}
 \omega_0 = \frac{\pi}{2 t_0} 
 \end{align}


 Detta beräknas genom att efter beräkning av friktionspåverkan i punkterna p1 och p2 beräkna den nya vinkelhastigheten enligt \eqref{newOmega}
Den nya vinkelhastigheten beräknas utifrån den mindre friktionen (fram på stenen) då kraften utöver detta som är friktionskraft i bakänden på stenen är kraften som går till rörelsen i sidled. 
 

\subsection{Kollision}

För att kontrollera att en kollision sker beräknas avståndet mellan stenarnas position \eqref{d}.
Om avståndet mellan stenarnas mittpunkter är mindre än två radier \eqref{lessThan} har stenarna krockat.  (eftersom krocken bara sker i 2 dimensioner). 

 \begin{align}\label{d}
 d& = \sqrt{(sten_{1_{xpos}} - sten_{2_{xpos}})^2   +   (sten_{1_{ypos}}-sten_{1_{ypos}})^2}\\\label{lessThan}
 d& \le 2 r
 \end{align}

\begin{figure}[ht!]
\centering
\includegraphics[width=80mm]{krock.png}
\caption{Kontrollera kollision}
\label{fig:kollision}
\label{overflow}
\end{figure}

Hastigheten och riktningen av curlingstenarna efter en kollision beräknas med hjälp av de tva stenarnas position och hastighetsvektorer.
(Kontroll av kollision Inelastiskt Delas upp i tva komponenter, normal och tangent)?

Från början har beräkningar gjorts av en rak central stöt där det finns två givna funktioner för att ta fram hastigheten efter krock. Med hjälp av stötkoefficienten kan man reglera allt från e=1 som är en helt elastisk stöt och e=0 som är en helt inelastisk stöt. I curling där det är två stenar som krockar är det rimligt med en energiförlust och en inelastisk stöt bör därmed tas i beräkning. Efter tester passar en stötkoefficent på e=?. (vad vi nu har satt)

 \begin{align}\label{e1}
 e& = \frac{v_2''-v_1''}{v_2'-v_1'}\\
 e& = \frac{relativ hastighet innan kollision}{relativ hastighet efter kollision}\\
0& \le e \le 1
 \end{align}

REFERENS: R Grahn,P-Å jansson: Dynamik (Studentlitteratur 1995), sid 334-345

Först antas en helt elastisk stöt där rörelsemängden bevaras helt och ger

 \begin{align}\label{elastisk}
m_1 v_1' + m_2 v_2'& = m_1 v_1'' + m_2 v_2'' \Rightarrow\\
m_1& = m_2 \Rightarrow\\
v_1' + v_2'& = v_1'' + v_2''
 \end{align}

För att kunna hantera sneda stötar behöver man dela upp v1och v2i en normal- och en tangentkomponent. 

 \begin{align}\label{vCollision}
v_1'& = v_{1n}' + v_{1t}'\\
v_2'& = v_{2n}' + v_{2t}'
 \end{align}

BILD

Vi räknar nu kollisionen som en rak central stöt med normalkomponenten. 

 \begin{align}\label{vCollision}
 v_{1n}' + v_{2n}'& = v_{1n}'' + v_{2n}''\\
 e& = \frac{v_{2n}''-v_{1n}''}{v_{2n}'-v_{1n}'}\\
 \end{align}

Löser ut: 

 \begin{align}\label{vCollision}
 v_{1n}''& = \frac{v_{1n}' + v_{2n}'  - e(v_{1n}' + v_{2n}')}{2} \\
 v_{2n}''& = \frac{v_{1n}' + v_{2n}'  + e(v_{1n}' + v_{2n}')}{2} 
 \end{align}

\pagebreak

\section{Numerisk}
Tre farter beräknas i varje steg av simuleringen: fart i rörelseriktningen, fart i ortogonal riktning som tillför curl samt vinkelhastighet. Dessa beräknas genom Runge-Kutta-metoden enligt \eqref{RungeKutta_transl}. 

 \begin{subequations}\label{RungeKutta_transl}
 \begin{align}
 v_{n+1}& =v_n + \frac{h}{6} (k_1+2 k_2 + 2 k_3 + k_4)\\
 k_1& = a(v_n)\\
 k_2& = a(v_n + \frac{h}{2} k_1)\\
 k_3& = a(v_n + \frac{h}{2} k_2)\\
 k_4& = a(v_n + h k_3)
 \end{align}
\end{subequations}

Funktionen a för accelerationen för de olika farterna olika beroende på de olika friktionstillstånden enligt \eqref{a_front},  \eqref{a_side}, \eqref{a_rotation}.
 
 \begin{align}\label{a_front}
 a_{front}& = - \mu g\\\label{a_side}
 a_{side}& = g \frac{c_2-c_1}{\sqrt{v_f}}\\\label{a_rotation}
 a_{rotation}& = - \frac{c_1}{r \sqrt{v_f}}
 \end{align}

Samtliga tre parametrar (fart framåt, fart i sidled och vinkelhastighet) är skalärer. Efter att nästa värde erhållits genom Runge-Kutta-metoden tas hastigheten i riktning framåt och i sidled fram och de två adderas genom vektoraddition. Ny position av stenen beräknas i sista steget genom Euler-metoden, där hastighetsvektorn anger riktning och steglängd \eqref{pos}. 

 \begin{align}\label{pos}
 pos_{n+1}& = pos_{n} + \bar{v} \Delta t
 \end{align}



\section{Simulering}

\section{Diskussion}

\end{document}
