<!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title>Curling</title>

            <!-- fonts som ska användas på sidan :) -->
            <link href='http://fonts.googleapis.com/css?family=Bad+Script' rel='stylesheet' type='text/css'>
            <link href='http://fonts.googleapis.com/css?family=Alegreya+Sans+SC' rel='stylesheet' type='text/css'>
            
            <link rel="stylesheet" type="text/css" href="style.css">

            <script type="text/javascript" src="external/glMatrix-0.9.5.min.js"></script>
            
            <script id="shader-fs" type="x-shader/x-fragment">
              precision mediump float;

              varying vec2 vTextureCoord;
              varying vec3 vLightWeighting;

              uniform sampler2D uSampler;

              void main(void) {
                  vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
                  gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);
              }
            </script>

            <script id="shader-vs" type="x-shader/x-vertex">
              attribute vec3 aVertexPosition;
              attribute vec3 aVertexNormal;
              attribute vec2 aTextureCoord;

              uniform mat4 uMMatrix;
              uniform mat4 uVMatrix;
              uniform mat4 uPMatrix;
              uniform mat3 uNMatrix;

              uniform vec3 uAmbientColor;
              uniform vec3 uPointLightingLocation;
              uniform vec3 uPointLightingColor;

              varying vec2 vTextureCoord;
              varying vec3 vLightWeighting;

              void main(void) {
                  vec4 mvPosition =  uMMatrix * vec4(aVertexPosition, 1.0);
                  gl_Position = uPMatrix * uVMatrix * mvPosition;
                  vTextureCoord = aTextureCoord;

                  vec3 lightDirection = normalize(uPointLightingLocation - mvPosition.xyz);

                  vec3 transformedNormal = normalize(uNMatrix * aVertexNormal);
                  float directionalLightWeighting = max(dot(transformedNormal, lightDirection), 0.0);
                  vLightWeighting = uAmbientColor + uPointLightingColor * directionalLightWeighting;
              }
            </script>
            <script type="text/javascript" src="webgl/initGL.js"></script>
            <script type="text/javascript" src="webgl/initShaders.js"></script>
            <script type="text/javascript" src="webgl/initBuffers.js"></script>
            <script type="text/javascript" src="webgl/initTextures.js"></script>
            <script type="text/javascript" src="webgl/drawScene.js"></script>
            <script type="text/javascript" src="external/sylvester.js"></script>
            <script type="text/javascript" src="dataConstants.js"></script>
            <script type="text/javascript" src="CurlingStone.js"></script>
            <script type="text/javascript" src="collision.js"></script>
            <script type="text/javascript" src="TheGame.js"></script>

            <script type="text/javascript">
              function start(){
                document.getElementById("newRound").style.visibility = "hidden";

                game = new theGame();
                game.starting();

                var player1 = new onePlayer();
                var player2 = new onePlayer();

                game.addPlayer(player1);
                game.addPlayer(player2);

                document.onkeydown = game.handleKeyDown;
                document.onkeyup = game.handleKeyUp;

                game.tick();
              }
            </script>
        
        </head>
      <body onload='start()'>
        <div id="wrapper">
          <h1> <img src="curling.jpg" alt="" height="35" /> Curling</h1>
          <p>
            Vinkel : <input type="text" id="vinkel"> Hastighet: <input type="text" id="hastighet"> <button id="spelare1" onclick="game.throwStoneFromUser(0)">Spelare 1</button> <button id="spelare2" disabled="disabled" onclick="game.throwStoneFromUser(1)">Spelare 2</button><br />
          </p>
                    <p>Spelare 1. Antal stenar: <span id="stone1">0</span>. Antal poäng: <span id="score1">0</span> | Spelare 2. Antal stenar: <span id="stone2">0</span>. Antal poäng: <span id="score2">0</span></p>
          <button id="newRound" onclick="game.resetRound()">Ny omgång</button><br />
          <canvas id="curlingbana" style="border:none" width="800" height="450"></canvas>

       </div>
      </body>
    </html>


